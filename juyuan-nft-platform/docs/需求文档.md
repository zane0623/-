# 钜园农业NFT预售平台 - 移动端应用需求文档

## 📋 项目概述

### 项目背景
基于现有的Web端钜园农业NFT预售平台，开发跨平台移动端应用，实现iOS和Android双端同时运行，为用户提供更便捷的移动端购物体验。

### 项目目标
- 保留原有Web端所有功能
- 提供原生级别的移动端用户体验
- 实现iOS和Android应用商店上架
- 扩大用户覆盖范围，提升平台活跃度

---

## 🎯 一、功能需求

### 1.1 核心功能（与Web端保持一致）

#### 用户认证系统
- ✅ 用户注册（邮箱注册）
- ✅ 用户登录（邮箱登录）
- ✅ 找回密码功能
- ✅ 第三方登录（微信、Apple登录）
- ✅ Web3钱包连接（MetaMask、WalletConnect）
- ✅ 生物识别登录（指纹、Face ID）
- ✅ 自动登录/记住密码功能
- ✅ 账号安全设置（修改密码、绑定手机等）

#### 预售展示功能
- ✅ 预售列表页面（网格/列表视图切换）
- ✅ 预售详情页面
- ✅ 产品图片轮播展示
- ✅ 产品信息展示（价格、库存、描述等）
- ✅ 预售倒计时功能
- ✅ 产品收藏功能
- ✅ 产品分享功能（分享到微信、朋友圈等）
- ✅ 预售状态筛选（进行中、即将开始、已结束）
- ✅ 搜索功能（按关键词搜索预售）

#### 订单管理功能
- ✅ 创建订单
- ✅ 订单列表（全部、待支付、已支付、已发货、已完成）
- ✅ 订单详情查看
- ✅ 订单状态追踪
- ✅ 物流信息查询
- ✅ 订单取消功能
- ✅ 订单评价功能
- ✅ 订单分享功能

#### 支付功能
- ✅ 多种支付方式（微信支付、支付宝、加密货币支付）
- ✅ 支付结果页面
- ✅ 支付失败重试机制
- ✅ 支付安全验证
- ✅ 订单支付倒计时

#### NFT管理功能
- ✅ NFT资产列表展示
- ✅ NFT详情页面（包含元数据）
- ✅ NFT转账功能
- ✅ NFT兑换实物功能
- ✅ NFT收藏展示
- ✅ NFT分享功能
- ✅ 查看区块链交易记录

#### 个人中心功能
- ✅ 个人资料展示和编辑
- ✅ 头像上传/更换
- ✅ 我的订单入口
- ✅ 我的NFT入口
- ✅ 我的收藏
- ✅ 收货地址管理
- ✅ 账号安全设置
- ✅ 系统设置（语言、通知等）
- ✅ 帮助与反馈
- ✅ 关于我们

#### 通知推送功能
- ✅ 订单状态变更通知
- ✅ 预售开始提醒
- ✅ 物流更新通知
- ✅ 营销活动推送
- ✅ 系统消息通知
- ✅ 通知设置管理

### 1.2 移动端特有功能

#### 扫码功能
- ✅ 二维码扫描（扫码登录、扫码支付）
- ✅ NFT二维码展示
- ✅ 产品溯源信息扫码查询

#### 地理位置功能
- ✅ 基于位置的配送费计算
- ✅ 附近取货点查询
- ✅ 地图展示产地信息

#### 相机功能
- ✅ 拍照上传头像
- ✅ 收货验货拍照上传
- ✅ 产品评价图片上传

#### 离线功能
- ✅ 缓存已浏览的预售信息
- ✅ 离线查看已购NFT
- ✅ 离线查看订单历史

---

## 💻 二、技术需求

### 2.1 技术架构

#### 开发框架
- **前端框架**: Flutter 3.x
- **编程语言**: Dart 3.x
- **状态管理**: Provider / Riverpod
- **路由管理**: go_router
- **网络请求**: Dio

#### 后端对接
- **API协议**: RESTful API
- **数据格式**: JSON
- **认证方式**: JWT Token
- **API基础地址**: 可配置切换（开发/测试/生产环境）

#### Web3集成
- **钱包连接**: WalletConnect
- **区块链交互**: web3dart
- **支持链**: Ethereum、Polygon等

### 2.2 平台支持

#### iOS平台
- **最低版本**: iOS 13.0+
- **目标设备**: iPhone 6s及以上
- **支持方向**: 竖屏为主，部分页面支持横屏
- **深色模式**: 完全支持
- **iPad适配**: 支持（响应式布局）

#### Android平台
- **最低版本**: Android 6.0 (API Level 23)+
- **目标设备**: 市面上主流Android手机
- **支持方向**: 竖屏为主，部分页面支持横屏
- **深色模式**: 完全支持
- **平板适配**: 支持（响应式布局）

### 2.3 数据存储

#### 本地存储
- **Token存储**: Flutter Secure Storage（加密存储）
- **用户偏好**: SharedPreferences
- **图片缓存**: cached_network_image
- **数据库**: SQLite（离线数据缓存）

#### 云端存储
- 所有业务数据通过API与后端交互
- 图片资源使用CDN加速

---

## 🎨 三、UI/UX设计需求

### 3.1 设计原则
- **一致性**: 与Web端保持视觉风格一致
- **简洁性**: 界面简洁清晰，操作直观
- **响应性**: 快速响应用户操作
- **友好性**: 符合移动端交互习惯

### 3.2 屏幕适配

#### 屏幕尺寸支持
- **小屏手机**: 4.7英寸 (iPhone SE)
- **中屏手机**: 5.5-6.1英寸（主流手机）
- **大屏手机**: 6.5-7英寸（Plus/Max系列）
- **平板设备**: iPad、Android平板

#### 分辨率适配
- **iPhone**: 支持所有iPhone分辨率（@2x, @3x）
- **Android**: 支持 ldpi, mdpi, hdpi, xhdpi, xxhdpi, xxxhdpi
- **响应式布局**: 使用Flutter的LayoutBuilder和MediaQuery

#### 安全区域适配
- 适配iOS刘海屏、药丸屏
- 适配Android异形屏
- 底部导航栏避开Home Indicator

### 3.3 主题系统

#### 颜色方案
- **主色调**: 绿色系（#10b981, #059669）
- **辅助色**: 蓝色、橙色、紫色
- **中性色**: 灰色系列
- **深色模式**: 完整的深色主题方案

#### 字体系统
- **中文字体**: 苹方（iOS）、思源黑体（Android）
- **英文字体**: San Francisco（iOS）、Roboto（Android）
- **字号范围**: 12sp - 32sp
- **字重**: Regular, Medium, Semibold, Bold

#### 图标系统
- 使用Material Icons和自定义SVG图标
- 统一的图标风格和尺寸规范

### 3.4 交互设计

#### 手势支持
- **下拉刷新**: 所有列表页面
- **上拉加载**: 分页数据加载
- **侧滑返回**: iOS标准手势
- **双击**: 图片放大
- **捏合缩放**: 图片查看器

#### 反馈机制
- **触觉反馈**: 按钮点击、操作成功/失败
- **视觉反馈**: Loading状态、空状态、错误状态
- **Toast提示**: 轻量级操作提示
- **Dialog弹窗**: 重要操作确认

#### 动画效果
- **页面转场**: 流畅的路由动画
- **列表动画**: Item出现动画
- **加载动画**: Shimmer效果骨架屏
- **微交互**: 按钮点击、卡片翻转等

---

## ⚡ 四、性能需求

### 4.1 性能指标

#### 启动性能
- **冷启动时间**: < 3秒
- **热启动时间**: < 1秒
- **首屏渲染时间**: < 2秒

#### 运行性能
- **页面帧率**: 保持60fps（部分设备支持120fps）
- **内存占用**: < 200MB（空闲状态）
- **CPU占用**: < 10%（空闲状态）
- **电池消耗**: 优化后台任务，减少电量消耗

#### 网络性能
- **API响应时间**: < 1秒
- **图片加载**: 使用渐进式加载和缓存
- **离线支持**: 关键数据本地缓存

### 4.2 优化策略

#### 代码优化
- 使用const构造函数减少重建
- 合理使用ListView.builder等懒加载组件
- 避免不必要的setState调用
- 使用Isolate处理耗时操作

#### 资源优化
- 图片压缩和WebP格式支持
- 按需加载资源
- 使用CDN加速静态资源

#### 网络优化
- 实现请求缓存机制
- 支持弱网环境下的降级处理
- 使用HTTP/2协议

---

## 🔒 五、安全需求

### 5.1 数据安全

#### 敏感数据保护
- **Token加密存储**: 使用Flutter Secure Storage
- **支付信息保护**: 不在本地存储完整支付信息
- **通信加密**: 全站HTTPS
- **数据传输**: 敏感数据加密传输

#### 代码安全
- **代码混淆**: 生产环境启用代码混淆
- **防逆向**: 添加防逆向工程措施
- **证书绑定**: 防止中间人攻击

### 5.2 账号安全

#### 认证安全
- **密码强度**: 要求密码复杂度
- **登录验证**: 支持验证码、短信验证
- **会话管理**: Token过期自动刷新
- **异常登录检测**: 多设备登录提醒

#### 权限管理
- **最小权限原则**: 只申请必要的系统权限
- **权限说明**: 清晰告知用户权限用途
- **动态权限**: 使用时再申请权限

---

## 📱 六、应用商店上架需求

### 6.1 iOS App Store

#### 应用信息
- **应用名称**: 钜园农业NFT预售平台
- **副标题**: 区块链农产品预售商城
- **关键词**: NFT、农产品、预售、区块链、溯源
- **分类**: 购物、金融科技
- **年龄分级**: 4+

#### 必需资源
- **应用图标**: 1024x1024px（PNG格式，无透明度）
- **启动屏**: 适配所有iPhone尺寸
- **预览视频**: 15-30秒应用演示（可选）
- **应用截图**: 
  - 6.5英寸: 至少3张
  - 5.5英寸: 至少3张
  - iPad Pro 12.9英寸: 至少3张（如支持iPad）

#### 合规要求
- **隐私政策**: 完整的隐私政策URL
- **用户协议**: 服务条款URL
- **支付说明**: 清晰的应用内购买说明
- **数据收集说明**: 详细的数据收集类型和用途
- **App审核信息**: 测试账号、特殊说明

#### 技术要求
- 支持最新iOS版本
- 使用官方API和SDK
- 不包含私有API调用
- 符合Human Interface Guidelines

### 6.2 Android应用商店

#### 国内应用商店（华为、小米、OPPO、VIVO、应用宝等）

##### 应用信息
- **应用名称**: 钜园农业
- **应用简介**: 100字以内
- **应用介绍**: 详细功能介绍
- **应用分类**: 购物、金融
- **适用年龄**: 全年龄

##### 必需资源
- **应用图标**: 512x512px（PNG格式）
- **应用截图**: 至少3张，建议5张（1080x1920px）
- **宣传图**: 1920x1080px（部分应用商店需要）

##### 合规要求
- **软件著作权**: 提供软著证书
- **ICP备案**: 提供备案号
- **隐私政策**: 完整的隐私政策
- **用户协议**: 服务条款
- **安全检测**: 通过各商店的安全扫描
- **实名认证**: 开发者实名认证

##### 技术要求
- **包名**: 使用公司域名反向
- **签名**: 使用正式签名证书
- **目标API**: 支持最新Android版本
- **权限说明**: 详细的权限使用说明
- **加固保护**: 建议使用应用加固（360加固、腾讯乐固等）

#### Google Play（可选）
- 遵循Material Design规范
- 提供完整的应用元数据
- 符合Google Play政策

---

## 🧪 七、测试需求

### 7.1 功能测试
- 所有功能点完整覆盖
- 正常流程和异常流程测试
- 边界条件测试
- 用户场景测试

### 7.2 兼容性测试

#### iOS设备测试
- iPhone SE (第二代、第三代)
- iPhone 11/12/13/14/15系列
- iPhone 11 Pro/12 Pro/13 Pro/14 Pro/15 Pro系列
- iPhone 11 Pro Max/12 Pro Max/13 Pro Max/14 Pro Max/15 Pro Max
- iPad系列（如支持）

#### Android设备测试
- 华为主流机型
- 小米主流机型
- OPPO主流机型
- VIVO主流机型
- 三星主流机型
- 一加、魅族等品牌代表机型

### 7.3 性能测试
- 启动速度测试
- 页面加载速度测试
- 内存泄漏检测
- 电量消耗测试
- 弱网环境测试

### 7.4 安全测试
- 数据传输加密测试
- 本地数据存储安全测试
- 防抓包测试
- 防逆向测试

---

## 📊 八、数据统计需求

### 8.1 用户行为分析
- 页面访问统计
- 用户留存分析
- 转化漏斗分析
- 用户路径分析

### 8.2 业务数据统计
- 预售浏览量
- 订单转化率
- 支付成功率
- NFT铸造数量

### 8.3 技术监控
- 应用崩溃率
- API错误率
- 性能监控（启动时间、页面加载时间）
- 设备分布统计

### 8.4 推荐的统计工具
- **国内**: 友盟+、神策数据、TalkingData
- **国外**: Firebase Analytics, Mixpanel
- **性能监控**: Sentry, Bugly

---

## 🌐 九、国际化需求

### 9.1 语言支持
- **简体中文**: 默认语言
- **繁体中文**: 支持港澳台用户
- **英语**: 支持国际用户
- **其他语言**: 根据业务需求扩展

### 9.2 本地化内容
- 界面文字翻译
- 日期时间格式
- 货币显示格式
- 数字格式化
- 右对齐语言支持（如阿拉伯语）

---

## 🔄 十、版本迭代计划

### 10.1 V1.0（MVP版本）
**预计时间**: 2-3个月

#### 核心功能
- ✅ 用户注册登录
- ✅ 预售列表和详情
- ✅ 订单创建和支付
- ✅ 个人中心基础功能
- ✅ NFT基础展示

#### 上架目标
- iOS App Store审核通过
- 国内至少2个主流应用商店上架

### 10.2 V1.1（优化版本）
**预计时间**: MVP发布后1个月

#### 新增功能
- ✅ 分享功能完善
- ✅ 收藏功能
- ✅ 消息推送
- ✅ 物流追踪
- ✅ 评价系统

#### 优化内容
- 性能优化
- UI细节优化
- Bug修复

### 10.3 V2.0（增强版本）
**预计时间**: V1.1发布后2-3个月

#### 新增功能
- ✅ 社区功能
- ✅ 直播功能
- ✅ 优惠券系统
- ✅ 积分系统
- ✅ 邀请好友功能
- ✅ 更多Web3功能

---

## 📝 十一、文档交付要求

### 11.1 开发文档
- 项目架构文档
- API接口文档
- 数据库设计文档
- 组件使用文档

### 11.2 部署文档
- 环境配置文档
- 打包发布文档
- 应用商店上架文档
- 更新发版流程文档

### 11.3 用户文档
- 用户使用手册
- 常见问题FAQ
- 隐私政策
- 用户协议

---

## ✅ 十二、验收标准

### 12.1 功能完整性
- [ ] 所有核心功能正常运行
- [ ] 与Web端功能保持一致
- [ ] 所有用户流程走通

### 12.2 性能达标
- [ ] 启动时间 < 3秒
- [ ] 页面流畅度 ≥ 60fps
- [ ] 内存占用合理

### 12.3 兼容性达标
- [ ] 主流iOS设备测试通过
- [ ] 主流Android设备测试通过
- [ ] 不同屏幕尺寸适配良好

### 12.4 应用商店上架
- [ ] iOS App Store审核通过并上架
- [ ] 至少3个国内主流Android应用商店上架

### 12.5 质量标准
- [ ] 崩溃率 < 0.1%
- [ ] ANR率 < 0.1%
- [ ] 用户评分 > 4.0

---

## 📞 十三、项目联系方式

### 项目团队
- **产品负责人**: [姓名]
- **技术负责人**: [姓名]
- **UI设计师**: [姓名]
- **测试负责人**: [姓名]

### 沟通机制
- **每日站会**: 早上10:00
- **周例会**: 每周一下午3:00
- **项目协作**: 使用[工具名称]
- **代码托管**: GitHub/GitLab
- **Bug追踪**: Jira/禅道

---

## 📅 附录

### A. 名词解释
- **NFT**: Non-Fungible Token，非同质化代币
- **Web3**: 基于区块链的去中心化网络
- **RWA**: Real World Assets，现实世界资产

### B. 参考资料
- Flutter官方文档: https://flutter.dev
- iOS Human Interface Guidelines
- Android Material Design Guidelines
- Web3开发文档

### C. 更新记录
| 版本 | 日期 | 更新内容 | 更新人 |
|------|------|----------|--------|
| 1.0  | 2025-10-28 | 初始版本创建 | - |

---

**文档编制**: 产品团队  
**最后更新**: 2025年10月28日  
**文档版本**: V1.0