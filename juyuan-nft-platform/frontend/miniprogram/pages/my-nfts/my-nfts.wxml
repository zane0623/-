<!-- æˆ‘çš„NFTé¡µ -->
<view class="page">
  <!-- ç™»å½•æç¤º -->
  <view class="login-prompt" wx:if="{{!isLoggedIn}}">
    <image src="/assets/images/login-prompt.png" class="prompt-image" />
    <text class="prompt-title">ç™»å½•åæŸ¥çœ‹æ‚¨çš„NFT</text>
    <text class="prompt-desc">è¿æ¥é’±åŒ…æˆ–æ‰‹æœºå·ç™»å½•</text>
    <button class="btn btn-primary" bindtap="goLogin">ç«‹å³ç™»å½•</button>
  </view>

  <!-- NFTåˆ—è¡¨ -->
  <view class="nft-container" wx:else>
    <!-- ç»Ÿè®¡å¡ç‰‡ -->
    <view class="stats-card">
      <view class="stat-item">
        <text class="stat-value">{{stats.total}}</text>
        <text class="stat-label">NFTæ€»æ•°</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-value">{{stats.pending}}</text>
        <text class="stat-label">å¾…äº¤ä»˜</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-value">{{stats.delivered}}</text>
        <text class="stat-label">å·²äº¤ä»˜</text>
      </view>
    </view>

    <!-- ç­›é€‰ -->
    <view class="filter-bar">
      <view class="filter-item {{currentFilter === 'all' ? 'active' : ''}}" bindtap="filterNFTs" data-filter="all">å…¨éƒ¨</view>
      <view class="filter-item {{currentFilter === 'pending' ? 'active' : ''}}" bindtap="filterNFTs" data-filter="pending">å¾…äº¤ä»˜</view>
      <view class="filter-item {{currentFilter === 'delivered' ? 'active' : ''}}" bindtap="filterNFTs" data-filter="delivered">å·²äº¤ä»˜</view>
    </view>

    <!-- NFTåˆ—è¡¨ -->
    <view class="nft-list">
      <view class="nft-card" wx:for="{{nfts}}" wx:key="id" bindtap="goNFTDetail" data-id="{{item.tokenId}}">
        <image src="{{item.image || '/assets/images/default-nft.jpg'}}" mode="aspectFill" class="nft-image" />
        <view class="nft-info">
          <view class="nft-header">
            <text class="nft-name">{{item.productType}}</text>
            <view class="nft-status status-{{item.deliveryStatus}}">
              {{item.deliveryStatus === 'DELIVERED' ? 'å·²äº¤ä»˜' : 'å¾…äº¤ä»˜'}}
            </view>
          </view>
          <text class="nft-token">Token #{{item.tokenId}}</text>
          <view class="nft-meta">
            <text>ğŸ“ {{item.originBase}}</text>
            <text>ğŸ“¦ {{item.quantity}}{{item.unit}}</text>
          </view>
          <view class="nft-footer">
            <text class="nft-quality">{{item.qualityGrade}}</text>
            <view class="nft-actions">
              <view class="action-btn" catchtap="viewTrace" data-id="{{item.tokenId}}">æº¯æº</view>
              <view class="action-btn primary" wx:if="{{item.deliveryStatus !== 'DELIVERED'}}">ç”³è¯·äº¤ä»˜</view>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{!loading && nfts.length === 0}}">
      <image src="/assets/images/empty-nft.png" />
      <text>æš‚æ— NFT</text>
      <text class="empty-hint">å‰å¾€é¢„å”®å¸‚åœºè´­ä¹°</text>
      <button class="btn btn-primary" bindtap="goPresale">å»è´­ä¹°</button>
    </view>

    <!-- åŠ è½½æ›´å¤š -->
    <view class="load-more" wx:if="{{loading}}">åŠ è½½ä¸­...</view>
  </view>
</view>

