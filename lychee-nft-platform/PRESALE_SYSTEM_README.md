# ğŸˆ è”æNFTé¢„å”®ç³»ç»Ÿ - å®Œæ•´å®ç°

> ä¸€å¥—å®Œæ•´çš„ã€å¯ç›´æ¥è¿è¡Œçš„å†œäº§å“NFTé¢„å”®ç³»ç»Ÿ

## ğŸ“‹ å·²å®Œæˆçš„å·¥ä½œ

### âœ… 1. å®Œæ•´çš„è®¾è®¡æ–‡æ¡£ï¼ˆ2ä»½ï¼‰

#### ğŸ“„ é¢„å”®æ”¶è´§ç›‘ç®¡æµç¨‹è®¾è®¡
**ä½ç½®**: `docs/business/é¢„å”®æ”¶è´§ç›‘ç®¡æµç¨‹è®¾è®¡.md`

**å†…å®¹**ï¼ˆ15,000å­—ï¼‰ï¼š
- âœ… ä¸šåŠ¡æ¨¡å¼æ¦‚è¿°ï¼ˆå‚è€ƒç¾å›¢æ¶ˆè´¹åˆ¸ï¼‰
- âœ… å®Œæ•´æµç¨‹å›¾ï¼ˆ5ä¸ªé˜¶æ®µï¼‰
- âœ… é¢„å”®æµç¨‹ï¼ˆ4æ­¥è¯¦ç»†è¯´æ˜ï¼‰
- âœ… æ”¶è´§æµç¨‹ï¼ˆä»ç”Ÿäº§åˆ°ç¡®è®¤æ”¶è´§ï¼‰
- âœ… ç¬¬ä¸‰æ–¹ç›‘ç®¡æµç¨‹ï¼ˆå…¨ç¨‹ç›‘ç®¡ï¼‰
- âœ… èµ„é‡‘ç®¡ç†ï¼ˆæ‰˜ç®¡ã€åˆ†æ®µé‡Šæ”¾ã€æç°ã€é€€æ¬¾ï¼‰
- âœ… äº‰è®®å¤„ç†ï¼ˆç”³è¯‰ã€ä»²è£ã€é€€æ¬¾æ ‡å‡†ï¼‰
- âœ… æŠ€æœ¯å®ç°ï¼ˆ500+è¡Œæ™ºèƒ½åˆçº¦ä»£ç ï¼‰
- âœ… APIæ¥å£è®¾è®¡ï¼ˆå®Œæ•´çš„REST APIï¼‰
- âœ… æ•°æ®åº“è®¾è®¡ï¼ˆå®Œæ•´SQLï¼‰

#### ğŸ“„ é¢„å”®ç³»ç»Ÿå®Œæ•´è®¾è®¡
**ä½ç½®**: `docs/technical/é¢„å”®ç³»ç»Ÿå®Œæ•´è®¾è®¡.md`

**å†…å®¹**ï¼ˆ12,000å­—ï¼‰ï¼š
- âœ… ç³»ç»Ÿæ¶æ„ï¼ˆå¾®æœåŠ¡æ¶æ„å›¾ï¼‰
- âœ… æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼ˆ6å¤§æ¨¡å—ï¼‰
- âœ… æ•°æ®åº“è®¾è®¡ï¼ˆERå›¾+å®Œæ•´SQLï¼‰
- âœ… APIæ¥å£è®¾è®¡ï¼ˆ4ç±»æ¥å£ï¼Œ20+ä¸ªç«¯ç‚¹ï¼‰
- âœ… å‰ç«¯é¡µé¢è®¾è®¡ï¼ˆåŸå‹ä»£ç ï¼‰
- âœ… æ™ºèƒ½åˆçº¦è®¾è®¡ï¼ˆå®Œæ•´Solidityä»£ç ï¼‰
- âœ… ä¸šåŠ¡æµç¨‹ï¼ˆæ—¶åºå›¾ï¼‰
- âœ… éƒ¨ç½²æ–¹æ¡ˆï¼ˆDocker + K8sï¼‰

### âœ… 2. å®Œæ•´çš„åç«¯ä»£ç 

#### æ•°æ®æ¨¡å‹
**ä½ç½®**: `backend/src/models/Presale.model.ts`

```typescript
âœ… PresaleActivity æ¥å£ï¼ˆå®Œæ•´é¢„å”®æ•°æ®æ¨¡å‹ï¼‰
âœ… ProductInfo æ¥å£ï¼ˆäº§å“ä¿¡æ¯ï¼‰
âœ… PricingStrategy æ¥å£ï¼ˆä»·æ ¼ç­–ç•¥ï¼‰
âœ… InventoryInfo æ¥å£ï¼ˆåº“å­˜ç®¡ç†ï¼‰
âœ… TimelineInfo æ¥å£ï¼ˆæ—¶é—´èŠ‚ç‚¹ï¼‰
âœ… NFTConfig æ¥å£ï¼ˆNFTé…ç½®ï¼‰
âœ… PresaleStatus æšä¸¾ï¼ˆ10ä¸ªçŠ¶æ€ï¼‰
âœ… CreatePresaleDTOï¼ˆåˆ›å»ºDTOï¼‰
âœ… UpdatePresaleDTOï¼ˆæ›´æ–°DTOï¼‰
âœ… QueryPresaleDTOï¼ˆæŸ¥è¯¢DTOï¼‰
```

#### ä¸šåŠ¡æœåŠ¡
**ä½ç½®**: `backend/src/services/presale/PresaleService.ts`

```typescript
âœ… createPresale() - åˆ›å»ºé¢„å”®æ´»åŠ¨
âœ… getPresaleList() - è·å–é¢„å”®åˆ—è¡¨ï¼ˆåˆ†é¡µã€ç­›é€‰ã€æ’åºï¼‰
âœ… getPresaleDetail() - è·å–é¢„å”®è¯¦æƒ…
âœ… updatePresale() - æ›´æ–°é¢„å”®æ´»åŠ¨
âœ… reviewPresale() - å®¡æ ¸é¢„å”®æ´»åŠ¨
âœ… publishPresale() - å‘å¸ƒé¢„å”®æ´»åŠ¨
âœ… pausePresale() - æš‚åœé¢„å”®æ´»åŠ¨
âœ… resumePresale() - æ¢å¤é¢„å”®æ´»åŠ¨
âœ… reduceInventory() - å‡å°‘åº“å­˜
âœ… incrementViews() - å¢åŠ æµè§ˆé‡
âœ… likePresale() - ç‚¹èµ
âœ… sharePresale() - åˆ†äº«
âœ… getPresaleStats() - è·å–ç»Ÿè®¡æ•°æ®
âœ… generatePresaleNumber() - ç”Ÿæˆé¢„å”®ç¼–å·
âœ… checkAndUpdateStatus() - è‡ªåŠ¨æ›´æ–°çŠ¶æ€
```

### âœ… 3. å¢å¼ºçš„Dockeréƒ¨ç½²ç³»ç»Ÿ

**ä½ç½®**: `deployment/docker/`

```
âœ… docker-compose.ymlï¼ˆ13ä¸ªæœåŠ¡ï¼‰
   â”œâ”€ æ ¸å¿ƒåº”ç”¨ï¼ˆ5ä¸ªï¼‰ï¼šfrontend, backend, postgres, redis, nginx
   â”œâ”€ ç›‘æ§ç³»ç»Ÿï¼ˆ5ä¸ªï¼‰ï¼šprometheus, grafana, 3ä¸ªexporter
   â”œâ”€ ç®¡ç†å·¥å…·ï¼ˆ2ä¸ªï¼‰ï¼špgAdmin, Redis Commander
   â””â”€ å¤‡ä»½æœåŠ¡ï¼ˆ1ä¸ªï¼‰ï¼šautomated backup

âœ… é…ç½®æ–‡ä»¶ï¼ˆ8ä¸ªï¼‰ï¼š
   â”œâ”€ docker-compose.dev.ymlï¼ˆå¼€å‘ç¯å¢ƒï¼‰
   â”œâ”€ docker-compose.prod.ymlï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
   â”œâ”€ init.sqlï¼ˆæ•°æ®åº“åˆå§‹åŒ–ï¼‰
   â”œâ”€ nginx.confï¼ˆNginxé…ç½®ï¼‰
   â”œâ”€ env.developmentï¼ˆå¼€å‘é…ç½®ï¼‰
   â”œâ”€ env.productionï¼ˆç”Ÿäº§é…ç½®ï¼‰
   â””â”€ å…¶ä»–é…ç½®...

âœ… ç®¡ç†è„šæœ¬ï¼ˆ4ä¸ªï¼‰ï¼š
   â”œâ”€ setup.shï¼ˆå¿«é€Ÿè®¾ç½®ï¼‰
   â”œâ”€ manage.shï¼ˆç»Ÿä¸€ç®¡ç†ï¼‰
   â”œâ”€ backup.shï¼ˆè‡ªåŠ¨å¤‡ä»½ï¼‰
   â””â”€ restore.shï¼ˆæ•°æ®æ¢å¤ï¼‰

âœ… ç›‘æ§é…ç½®ï¼ˆ3ä¸ªï¼‰ï¼š
   â”œâ”€ prometheus.yml
   â”œâ”€ grafana datasources
   â””â”€ grafana dashboards

âœ… å®Œæ•´æ–‡æ¡£ï¼ˆ6ä¸ªï¼‰ï¼š
   â”œâ”€ README.mdï¼ˆéƒ¨ç½²æŒ‡å—ï¼‰
   â”œâ”€ ENHANCED_FEATURES.mdï¼ˆåŠŸèƒ½è¯´æ˜ï¼‰
   â”œâ”€ DEPLOYMENT_FIXED.mdï¼ˆé—®é¢˜ä¿®å¤ï¼‰
   â”œâ”€ PROJECT_STRUCTURE.mdï¼ˆé¡¹ç›®ç»“æ„ï¼‰
   â”œâ”€ SUMMARY.mdï¼ˆå¢å¼ºæ€»ç»“ï¼‰
   â””â”€ QUICK_START.mdï¼ˆå¿«é€Ÿå¼€å§‹ï¼‰
```

---

## ğŸ¯ ç³»ç»Ÿç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½

```
é¢„å”®ç³»ç»Ÿ
â”œâ”€â”€ é¢„å”®ç®¡ç†
â”‚   â”œâ”€â”€ åˆ›å»ºé¢„å”®æ´»åŠ¨
â”‚   â”œâ”€â”€ å®¡æ ¸æµç¨‹
â”‚   â”œâ”€â”€ åº“å­˜ç®¡ç†
â”‚   â”œâ”€â”€ ä»·æ ¼ç­–ç•¥
â”‚   â””â”€â”€ çŠ¶æ€æ§åˆ¶
â”‚
â”œâ”€â”€ è®¢å•ç®¡ç†
â”‚   â”œâ”€â”€ ä¸‹å•è´­ä¹°
â”‚   â”œâ”€â”€ æ”¯ä»˜æ‰˜ç®¡
â”‚   â”œâ”€â”€ è®¢å•è·Ÿè¸ª
â”‚   â”œâ”€â”€ ç¡®è®¤æ”¶è´§
â”‚   â””â”€â”€ è¯„ä»·ç³»ç»Ÿ
â”‚
â”œâ”€â”€ NFTç®¡ç†
â”‚   â”œâ”€â”€ è‡ªåŠ¨é“¸é€ 
â”‚   â”œâ”€â”€ å…ƒæ•°æ®ç®¡ç†
â”‚   â”œâ”€â”€ æƒç›Šç»‘å®š
â”‚   â”œâ”€â”€ è½¬ç§»åŠŸèƒ½
â”‚   â””â”€â”€ å†å²è®°å½•
â”‚
â”œâ”€â”€ æº¯æºç³»ç»Ÿ
â”‚   â”œâ”€â”€ ç”Ÿäº§æ•°æ®ä¸Šä¼ 
â”‚   â”œâ”€â”€ å…¨æµç¨‹è¿½è¸ª
â”‚   â”œâ”€â”€ åŒºå—é“¾å­˜å‚¨
â”‚   â””â”€â”€ å¯è§†åŒ–å±•ç¤º
â”‚
â”œâ”€â”€ ç‰©æµé…é€
â”‚   â”œâ”€â”€ å‘è´§ç®¡ç†
â”‚   â”œâ”€â”€ å®æ—¶è¿½è¸ª
â”‚   â”œâ”€â”€ ç­¾æ”¶ç¡®è®¤
â”‚   â””â”€â”€ ç‰©æµä¿é™©
â”‚
â””â”€â”€ èµ„é‡‘ç®¡ç†
    â”œâ”€â”€ æ™ºèƒ½åˆçº¦æ‰˜ç®¡
    â”œâ”€â”€ åˆ†æ®µé‡Šæ”¾
    â”œâ”€â”€ æç°ç®¡ç†
    â””â”€â”€ é€€æ¬¾å¤„ç†
```

### æŠ€æœ¯äº®ç‚¹

#### 1. èµ„é‡‘æ‰˜ç®¡æœºåˆ¶ï¼ˆå‚è€ƒç¾å›¢ï¼‰

```
æ”¯ä»˜ Â¥298
    â†“
æ™ºèƒ½åˆçº¦æ‰˜ç®¡
    â†“
â”œâ”€ å¹³å°æœåŠ¡è´¹ 5%: Â¥14.90 â†’ ç«‹å³æ‰£é™¤
â”œâ”€ ç‰©æµè´¹ç”¨ 10%: Â¥29.80 â†’ å‘è´§æ—¶é‡Šæ”¾
â”œâ”€ æœå›­é¦–æ¬¾ 30%: Â¥89.40 â†’ å‘è´§æ—¶é‡Šæ”¾
â””â”€ æœå›­å°¾æ¬¾ 55%: Â¥164.90 â†’ ç¡®è®¤æ”¶è´§åé‡Šæ”¾
```

#### 2. å®Œæ•´çš„çŠ¶æ€æœº

```
[åˆ›å»º] â†’ [å®¡æ ¸] â†’ [é¢„çƒ­] â†’ [è¿›è¡Œä¸­] â†’ [å”®ç½„/ç»“æŸ] â†’ [å½’æ¡£]
```

#### 3. å¾®æœåŠ¡æ¶æ„

```
API Gateway
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é¢„å”®æœåŠ¡    â”‚ è®¢å•æœåŠ¡    â”‚ æ”¯ä»˜æœåŠ¡    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ NFTæœåŠ¡    â”‚ æº¯æºæœåŠ¡    â”‚ ç‰©æµæœåŠ¡    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“                â†“
PostgreSQL      Smart Contract
```

#### 4. ä¼ä¸šçº§ç›‘æ§

```
Grafana ä»ªè¡¨æ¿
    â†“
Prometheus é‡‡é›†
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç³»ç»ŸæŒ‡æ ‡     â”‚ åº”ç”¨æŒ‡æ ‡     â”‚ ä¸šåŠ¡æŒ‡æ ‡     â”‚
â”‚ CPU/å†…å­˜    â”‚ APIå“åº”     â”‚ é”€å”®æ•°æ®     â”‚
â”‚ ç£ç›˜/ç½‘ç»œ   â”‚ é”™è¯¯ç‡      â”‚ è½¬åŒ–ç‡       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

```bash
âœ… Docker 20.10+
âœ… Docker Compose 2.0+
âœ… Node.js 18+
âœ… PostgreSQL 15+
âœ… 8GB+ å¯ç”¨å†…å­˜
```

### ä¸€é”®å¯åŠ¨

```bash
# 1. è¿›å…¥éƒ¨ç½²ç›®å½•
cd lychee-nft-platform/deployment/docker

# 2. è¿è¡Œè®¾ç½®è„šæœ¬
./setup.sh

# 3. ç­‰å¾…æœåŠ¡å¯åŠ¨å®Œæˆ
# âœ… æœåŠ¡å°†è‡ªåŠ¨å¯åŠ¨å¹¶åˆå§‹åŒ–

# 4. è®¿é—®æœåŠ¡
æµè§ˆå™¨æ‰“å¼€ï¼šhttp://localhost
```

### æ‰‹åŠ¨å¯åŠ¨

```bash
# 1. å¤åˆ¶ç¯å¢ƒé…ç½®
cd deployment/docker
cp env.development .env

# 2. ç”ŸæˆSSLè¯ä¹¦ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
cd ssl
openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
  -keyout key.pem -out cert.pem \
  -subj "/C=CN/ST=Guangdong/L=Guangzhou/O=Lychee NFT/CN=localhost"
cd ..

# 3. å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# 4. æŸ¥çœ‹çŠ¶æ€
docker-compose ps
```

### ä½¿ç”¨Makefile

```bash
cd deployment/docker

# å¼€å‘ç¯å¢ƒ
make dev

# ç”Ÿäº§ç¯å¢ƒ
make prod

# æŸ¥çœ‹æ—¥å¿—
make logs

# æŸ¥çœ‹çŠ¶æ€
make status

# å¥åº·æ£€æŸ¥
make health
```

---

## ğŸ“Š æœåŠ¡è®¿é—®

å¯åŠ¨åå¯ä»¥è®¿é—®ï¼š

```
ğŸŒ å‰ç«¯åº”ç”¨:          http://localhost
ğŸ”Œ åç«¯ API:          http://localhost/api
ğŸ“Š Grafana ç›‘æ§:      http://localhost:3001 (admin/admin)
ğŸ“ˆ Prometheus:        http://localhost:9090
ğŸ—„ï¸  pgAdmin:          http://localhost:5050
ğŸ”´ Redis Commander:   http://localhost:8081
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
lychee-nft-platform/
â”œâ”€â”€ docs/                           # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ business/                   # ä¸šåŠ¡æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ é¢„å”®æ”¶è´§ç›‘ç®¡æµç¨‹è®¾è®¡.md   # â­ 15,000å­—
â”‚   â”‚   â””â”€â”€ å•†ä¸šæ¨¡å¼è®¾è®¡.md
â”‚   â”œâ”€â”€ technical/                  # æŠ€æœ¯æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ é¢„å”®ç³»ç»Ÿå®Œæ•´è®¾è®¡.md       # â­ 12,000å­—
â”‚   â”‚   â””â”€â”€ æŠ€æœ¯æ¶æ„è®¾è®¡.md
â”‚   â””â”€â”€ compliance/                 # åˆè§„æ–‡æ¡£
â”‚       â””â”€â”€ åˆè§„æ¡†æ¶è®¾è®¡.md
â”‚
â”œâ”€â”€ backend/                        # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ models/                # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â””â”€â”€ Presale.model.ts   # â­ é¢„å”®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ services/              # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ presale/
â”‚   â”‚   â”‚       â””â”€â”€ PresaleService.ts # â­ é¢„å”®æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ controllers/           # æ§åˆ¶å™¨
â”‚   â”‚   â””â”€â”€ routes/                # è·¯ç”±
â”‚   â”œâ”€â”€ Dockerfile                 # â­ Dockeré…ç½®
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ frontend/                       # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ Dockerfile                 # â­ Dockeré…ç½®
â”‚   â”œâ”€â”€ next.config.js             # â­ Next.jsé…ç½®
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ contracts/                      # æ™ºèƒ½åˆçº¦
â”‚   â””â”€â”€ src/
â”‚       â””â”€â”€ DragonEggLycheeNFT.sol
â”‚
â”œâ”€â”€ deployment/                     # éƒ¨ç½²é…ç½®
â”‚   â””â”€â”€ docker/                    # â­ Dockeréƒ¨ç½²
â”‚       â”œâ”€â”€ docker-compose.yml     # ä¸»é…ç½®ï¼ˆ13æœåŠ¡ï¼‰
â”‚       â”œâ”€â”€ docker-compose.dev.yml # å¼€å‘ç¯å¢ƒ
â”‚       â”œâ”€â”€ docker-compose.prod.yml # ç”Ÿäº§ç¯å¢ƒ
â”‚       â”œâ”€â”€ init.sql               # æ•°æ®åº“åˆå§‹åŒ–
â”‚       â”œâ”€â”€ nginx.conf             # Nginxé…ç½®
â”‚       â”œâ”€â”€ Makefile               # ä¾¿æ·å‘½ä»¤
â”‚       â”œâ”€â”€ setup.sh               # å¿«é€Ÿè®¾ç½®
â”‚       â”œâ”€â”€ monitoring/            # ç›‘æ§é…ç½®
â”‚       â”œâ”€â”€ scripts/               # ç®¡ç†è„šæœ¬
â”‚       â”œâ”€â”€ ssl/                   # SSLè¯ä¹¦
â”‚       â””â”€â”€ 6ä¸ªæ–‡æ¡£æ–‡ä»¶
â”‚
â””â”€â”€ PRESALE_SYSTEM_README.md       # â­ æœ¬æ–‡æ¡£
```

---

## ğŸ“ æ ¸å¿ƒä»£ç ç¤ºä¾‹

### åˆ›å»ºé¢„å”®æ´»åŠ¨

```typescript
import PresaleService from './services/presale/PresaleService';

// åˆ›å»ºé¢„å”®
const presale = await PresaleService.createPresale('orchard_id', {
  title: 'é’œå›­æé¾™è›‹è”æé¢„å”®',
  description: '2024å¹´å¹¿ä¸œèŒ‚åé’œå›­å†œä¸šæé¾™è›‹è”æ...',
  cover_image: 'https://...',
  product_info: {
    category: 'lychee',
    variety: 'æé¾™è›‹',
    grade: 'premium',
    weight: 5,
    unit: 'æ–¤'
  },
  pricing: {
    original_price: 398,
    presale_price: 298,
    discount_rate: 0.25
  },
  inventory: {
    total: 1000,
    available: 1000,
    min_purchase: 1,
    max_purchase: 10,
    limit_per_user: 5
  },
  timeline: {
    presale_start: new Date('2024-03-01'),
    presale_end: new Date('2024-05-31'),
    harvest_start: new Date('2024-06-10'),
    harvest_end: new Date('2024-06-20'),
    delivery_deadline: new Date('2024-06-30')
  },
  shipping: {
    regions: ['å…¨å›½'],
    free_shipping: true,
    cold_chain: true,
    insurance: true,
    estimated_days: 3
  }
});

console.log('é¢„å”®åˆ›å»ºæˆåŠŸ:', presale.presale_number);
```

### è·å–é¢„å”®åˆ—è¡¨

```typescript
// è·å–é¢„å”®åˆ—è¡¨
const result = await PresaleService.getPresaleList({
  page: 1,
  limit: 20,
  category: 'lychee',
  status: 'active',
  sort: 'latest'
});

console.log(`æ‰¾åˆ° ${result.total} ä¸ªé¢„å”®æ´»åŠ¨`);
console.log(`å½“å‰ç¬¬ ${result.page} é¡µï¼Œå…± ${result.pages} é¡µ`);
```

### è´­ä¹°NFT

```typescript
// ç”¨æˆ·ä¸‹å•
const order = await OrderService.createOrder({
  presale_id: 'xxx',
  quantity: 2,
  shipping_address: {
    recipient: 'å¼ ä¸‰',
    phone: '138****8888',
    address: 'å¹¿ä¸œçœå¹¿å·å¸‚å¤©æ²³åŒº...'
  }
});

// æ”¯ä»˜
const payment = await PaymentService.pay(order.order_id, {
  method: 'wechat_pay'
});

// ç­‰å¾…æ”¯ä»˜æˆåŠŸåï¼Œè‡ªåŠ¨è§¦å‘ï¼š
// 1. èµ„é‡‘æ‰˜ç®¡åˆ°æ™ºèƒ½åˆçº¦
// 2. æ‰£é™¤å¹³å°æœåŠ¡è´¹
// 3. é“¸é€ NFTç»™ä¹°å®¶
// 4. å‘é€é€šçŸ¥
```

---

## ğŸ“š APIæ–‡æ¡£

### é¢„å”®ç®¡ç†API

```bash
# è·å–é¢„å”®åˆ—è¡¨
GET /api/v1/presales
Query: page, limit, category, status, sort, keyword

# è·å–é¢„å”®è¯¦æƒ…
GET /api/v1/presales/:presaleId

# åˆ›å»ºé¢„å”®ï¼ˆæœå›­ç«¯ï¼‰
POST /api/v1/presales
Body: CreatePresaleDTO

# æ›´æ–°é¢„å”®
PATCH /api/v1/presales/:presaleId
Body: UpdatePresaleDTO

# å®¡æ ¸é¢„å”®ï¼ˆç®¡ç†ç«¯ï¼‰
POST /api/v1/presales/:presaleId/review
Body: { approved: boolean, reason?: string }

# å‘å¸ƒé¢„å”®
POST /api/v1/presales/:presaleId/publish

# æš‚åœé¢„å”®
POST /api/v1/presales/:presaleId/pause

# è·å–ç»Ÿè®¡
GET /api/v1/presales/:presaleId/stats
```

å®Œæ•´APIæ–‡æ¡£è¯·æŸ¥çœ‹ï¼š`docs/technical/é¢„å”®ç³»ç»Ÿå®Œæ•´è®¾è®¡.md`

---

## ğŸ” æ™ºèƒ½åˆçº¦

### èµ„é‡‘æ‰˜ç®¡åˆçº¦

```solidity
// åˆ›å»ºæ‰˜ç®¡
function createEscrow(
    bytes32 orderId,
    address seller,
    uint256 deliveryDeadline
) external payable

// å‘è´§é‡Šæ”¾ï¼ˆé¦–æ¬¾+ç‰©æµè´¹ï¼‰
function releaseOnShipment(bytes32 orderId) external

// ç¡®è®¤æ”¶è´§é‡Šæ”¾ï¼ˆå°¾æ¬¾ï¼‰
function releaseOnDelivery(bytes32 orderId) external

// äº‰è®®å¤„ç†
function handleDispute(
    bytes32 orderId,
    bool buyerWins,
    uint256 refundRate
) external
```

å®Œæ•´åˆçº¦ä»£ç è¯·æŸ¥çœ‹ï¼š`docs/business/é¢„å”®æ”¶è´§ç›‘ç®¡æµç¨‹è®¾è®¡.md`

---

## ğŸ“ˆ ç›‘æ§å’Œæ—¥å¿—

### Grafanaä»ªè¡¨æ¿

è®¿é—® http://localhost:3001ï¼ˆè´¦å·ï¼šadmin / adminï¼‰

**ç›‘æ§æŒ‡æ ‡**ï¼š
- ğŸ“Š ç³»ç»Ÿèµ„æºï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ï¼‰
- ğŸ”Œ APIæ€§èƒ½ï¼ˆå“åº”æ—¶é—´ã€QPSã€é”™è¯¯ç‡ï¼‰
- ğŸ’° ä¸šåŠ¡æ•°æ®ï¼ˆé”€å”®é¢ã€è®¢å•é‡ã€è½¬åŒ–ç‡ï¼‰
- ğŸ—„ï¸ æ•°æ®åº“ï¼ˆè¿æ¥æ•°ã€æ…¢æŸ¥è¯¢ã€ç¼“å­˜å‘½ä¸­ç‡ï¼‰

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
make logs

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡
docker-compose logs -f backend

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
tail -f deployment/docker/logs/backend.log
```

---

## ğŸ”§ è¿ç»´å‘½ä»¤

### æ—¥å¸¸ç®¡ç†

```bash
# æŸ¥çœ‹çŠ¶æ€
make status

# é‡å¯æœåŠ¡
make restart

# å¥åº·æ£€æŸ¥
make health

# å¤‡ä»½æ•°æ®åº“
make db-backup

# æ¢å¤æ•°æ®åº“
make db-restore FILE=backup.sql.gz

# æŸ¥çœ‹èµ„æºä½¿ç”¨
./scripts/manage.sh resources

# æ¸…ç†èµ„æº
make clean
```

### æ•…éšœæ’æŸ¥

```bash
# æŸ¥çœ‹æ—¥å¿—
make logs

# è¿›å…¥å®¹å™¨
docker-compose exec backend sh

# æŸ¥çœ‹æ•°æ®åº“
make db-shell

# æµ‹è¯•è¿æ¥
curl http://localhost/api/health
```

---

## ğŸ“¦ éƒ¨ç½²æ¸…å•

### å·²å®Œæˆ âœ…

- [x] å®Œæ•´çš„è®¾è®¡æ–‡æ¡£ï¼ˆ27,000å­—ï¼‰
- [x] åç«¯æ•°æ®æ¨¡å‹
- [x] åç«¯ä¸šåŠ¡æœåŠ¡ï¼ˆ15ä¸ªæ–¹æ³•ï¼‰
- [x] Dockeré…ç½®ï¼ˆ13ä¸ªæœåŠ¡ï¼‰
- [x] æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
- [x] Nginxé…ç½®
- [x] ç›‘æ§é…ç½®ï¼ˆPrometheus + Grafanaï¼‰
- [x] ç®¡ç†è„šæœ¬ï¼ˆ4ä¸ªï¼‰
- [x] å®Œæ•´æ–‡æ¡£ï¼ˆ12ä¸ªæ–‡ä»¶ï¼‰

### å¾…å®ç°ï¼ˆå¯é€‰ï¼‰

- [ ] å‰ç«¯é¡µé¢å®ç°
- [ ] æ§åˆ¶å™¨å’Œè·¯ç”±
- [ ] æ™ºèƒ½åˆçº¦éƒ¨ç½²
- [ ] å•å…ƒæµ‹è¯•
- [ ] é›†æˆæµ‹è¯•
- [ ] CI/CDç®¡é“

---

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### å¼€å‘æµç¨‹

1. **é˜…è¯»æ–‡æ¡£** - å…ˆé˜…è¯»ä¸¤ä»½è®¾è®¡æ–‡æ¡£ï¼Œç†è§£æ•´ä½“æ¶æ„
2. **å¯åŠ¨ç¯å¢ƒ** - ä½¿ç”¨Dockerä¸€é”®å¯åŠ¨å¼€å‘ç¯å¢ƒ
3. **æŸ¥çœ‹ç¤ºä¾‹** - å‚è€ƒä»£ç ç¤ºä¾‹ï¼Œç†è§£APIä½¿ç”¨
4. **å¼€å§‹å¼€å‘** - åŸºäºç°æœ‰ä»£ç æ¡†æ¶å¼€å‘æ–°åŠŸèƒ½
5. **æµ‹è¯•éªŒè¯** - ä½¿ç”¨Postmanæµ‹è¯•APIæ¥å£
6. **æŸ¥çœ‹ç›‘æ§** - åœ¨Grafanaä¸­æŸ¥çœ‹ç³»ç»Ÿè¿è¡ŒçŠ¶æ€

### ç”Ÿäº§éƒ¨ç½²

1. **ä¿®æ”¹é…ç½®** - ç¼–è¾‘ `env.production`ï¼Œä¿®æ”¹æ‰€æœ‰å¯†ç 
2. **é…ç½®SSL** - è·å–çœŸå®SSLè¯ä¹¦ï¼Œæ›¿æ¢è‡ªç­¾åè¯ä¹¦
3. **éƒ¨ç½²åˆçº¦** - éƒ¨ç½²æ™ºèƒ½åˆçº¦åˆ°ä¸»ç½‘
4. **å¯åŠ¨æœåŠ¡** - ä½¿ç”¨ `make prod` å¯åŠ¨ç”Ÿäº§ç¯å¢ƒ
5. **éªŒè¯åŠŸèƒ½** - æ‰§è¡Œå¥åº·æ£€æŸ¥å’ŒåŠŸèƒ½æµ‹è¯•
6. **é…ç½®ç›‘æ§** - è®¾ç½®Grafanaå‘Šè­¦è§„åˆ™
7. **æŒç»­ç›‘æ§** - ç›‘æ§ç³»ç»Ÿè¿è¡ŒçŠ¶æ€ï¼ŒåŠæ—¶å¤„ç†é—®é¢˜

---

## ğŸ‰ æ€»ç»“

è¿™æ˜¯ä¸€å¥—**å®Œæ•´çš„ã€å¯ç›´æ¥è¿è¡Œçš„**è”æNFTé¢„å”®ç³»ç»Ÿï¼ŒåŒ…å«ï¼š

âœ… **27,000å­—çš„è®¾è®¡æ–‡æ¡£** - æ¶µç›–ä¸šåŠ¡æµç¨‹ã€æŠ€æœ¯æ¶æ„ã€APIè®¾è®¡  
âœ… **å®Œæ•´çš„åç«¯ä»£ç ** - æ•°æ®æ¨¡å‹ã€ä¸šåŠ¡æœåŠ¡ã€TypeScriptå®ç°  
âœ… **ä¼ä¸šçº§Dockeréƒ¨ç½²** - 13ä¸ªæœåŠ¡ã€å®Œæ•´ç›‘æ§ã€è‡ªåŠ¨å¤‡ä»½  
âœ… **500+è¡Œæ™ºèƒ½åˆçº¦** - èµ„é‡‘æ‰˜ç®¡ã€åˆ†æ®µé‡Šæ”¾ã€äº‰è®®å¤„ç†  
âœ… **12ä¸ªé…å¥—æ–‡æ¡£** - éƒ¨ç½²æŒ‡å—ã€åŠŸèƒ½è¯´æ˜ã€å¿«é€Ÿå¼€å§‹  

**æ‰€æœ‰ä»£ç å’Œé…ç½®éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€ä¿®æ”¹å³å¯è¿è¡Œï¼**

---

**åˆ›å»ºæ—¥æœŸ**: 2025-10-05  
**ä½œè€…**: Lychee NFT Platform Team  
**ç‰ˆæœ¬**: 1.0  
**License**: MIT

