# 🚀 开始开发 - 快速指引

## 👋 欢迎！

您的 **钜园农业NFT预售平台** 基础架构已经搭建完成！

---

## ⚡ 5分钟快速启动

### 方式1：一键启动（推荐）

```bash
cd /Users/fancyfizzy/Downloads/RWA/lychee-nft-platform
./快速启动.sh
```

### 方式2：手动启动

```bash
# 1. 安装依赖（首次运行）
npm install
cd backend && npm install && cd ..
cd frontend && npm install && cd ..

# 2. 启动数据库（使用Docker）
cd deployment/docker
docker-compose up -d postgres redis

# 3. 初始化数据库
cd ../../backend
npx prisma generate
npx prisma migrate dev --name init

# 4. 启动开发服务器
cd ..
npm run dev
```

---

## 📂 项目结构说明

```
lychee-nft-platform/
├── 📖 网站搭建指南.md         ← 完整的搭建教程
├── 📊 项目总结.md             ← 项目进度和成果
├── ⚡ 快速启动.sh             ← 一键启动脚本
├── ✅ 修复完成通知.md          ← 15个漏洞修复总结
│
├── backend/                   ← 后端服务
│   ├── src/
│   │   ├── index.ts          ← 服务器入口 ✅
│   │   ├── services/         ← 业务逻辑（预售、订单已修复）✅
│   │   └── routes/           ← API路由（待开发）🚧
│   └── prisma/
│       └── schema.prisma     ← 数据库模型（15张表）✅
│
├── frontend/                  ← 前端应用
│   ├── src/
│   │   ├── app/              ← Next.js页面（待开发）🚧
│   │   └── components/       ← React组件（待开发）🚧
│   └── package.json          ← 依赖配置 ✅
│
├── contracts/                 ← 智能合约
│   ├── EscrowManager.fixed.sol ← 托管合约（已修复）✅
│   └── scripts/              ← 部署脚本（待创建）🚧
│
└── docs/                      ← 项目文档
    ├── technical/
    │   ├── 逻辑错误修复报告.md  ← 详细修复说明 ✅
    │   └── 修复前后对比.md      ← 图文对比 ✅
    └── business/              ← 业务需求文档 ✅
```

---

## 🎯 下一步开发任务

### 优先级 P0（本周必须完成）

#### 1. 后端API开发（2-3天）

创建以下API路由：

```typescript
// backend/src/routes/auth.routes.ts
POST   /api/auth/register        # 用户注册
POST   /api/auth/login           # 用户登录
POST   /api/auth/wallet-login    # Web3钱包登录
GET    /api/auth/me              # 获取当前用户

// backend/src/routes/presale.routes.ts
GET    /api/presales             # 预售列表
GET    /api/presales/:id         # 预售详情
POST   /api/presales             # 创建预售（管理员）
PATCH  /api/presales/:id         # 更新预售（管理员）

// backend/src/routes/order.routes.ts
POST   /api/orders               # 创建订单
GET    /api/orders/:id           # 订单详情
GET    /api/orders/my            # 我的订单列表
POST   /api/orders/:id/pay       # 支付订单
POST   /api/orders/:id/cancel    # 取消订单
```

💡 **提示**: 使用已修复的服务（`PresaleService.fixed.ts`, `OrderService.fixed.ts`）

#### 2. 前端首页开发（1-2天）

创建以下页面：

```
frontend/src/app/
├── page.tsx                    # 首页（预售列表）
├── presales/[id]/page.tsx      # 预售详情页
└── orders/[id]/page.tsx        # 订单详情页
```

---

### 优先级 P1（下周完成）

#### 3. Web3集成（2-3天）

```bash
# 1. 部署智能合约到BSC测试网
cd contracts
npx hardhat compile
npx hardhat run scripts/deploy.ts --network bscTestnet

# 2. 集成RainbowKit钱包连接
# 3. 实现NFT铸造逻辑
```

#### 4. 支付系统（2-3天）

- 加密货币支付（USDT、BNB）
- 微信支付集成
- 支付宝集成

---

## 📚 推荐阅读顺序

### 新手入门
1. **[网站搭建指南.md](./网站搭建指南.md)** - 从零开始搭建
2. **[修复前后对比.md](./docs/technical/修复前后对比.md)** - 了解系统安全性

### 深入了解
3. **[项目总结.md](./项目总结.md)** - 查看完整进度
4. **[逻辑错误修复报告.md](./docs/technical/逻辑错误修复报告.md)** - 技术细节

### 业务理解
5. **[FIP功能实施计划](../钜园农业农产品NFT预售平台FIP.md)** - 技术方案
6. **[PRD产品需求文档](../钜园农业农产品NFT预售平台PRD.md)** - 产品需求

---

## 🔗 常用链接

### 本地开发
- 🌐 前端: http://localhost:3000
- 🔧 后端: http://localhost:5000/api
- 💚 健康检查: http://localhost:5000/health
- 📊 数据库管理: `npx prisma studio` → http://localhost:5555

### 文档资源
- [Prisma文档](https://www.prisma.io/docs)
- [Next.js文档](https://nextjs.org/docs)
- [Hardhat文档](https://hardhat.org/docs)
- [RainbowKit文档](https://www.rainbowkit.com/docs)

---

## 💬 获取帮助

### 遇到问题？

1. **查看文档**: 先查阅相关文档
2. **检查日志**: 查看控制台错误信息
3. **搜索Issue**: 可能已有解决方案
4. **向我提问**: 我随时可以帮助您！

### 常见问题

**Q: 数据库连接失败？**
```bash
# 确保PostgreSQL已启动
cd deployment/docker
docker-compose up -d postgres

# 检查连接字符串
# backend/.env 中的 DATABASE_URL
```

**Q: 前端无法连接后端？**
```bash
# 检查前端环境变量
# frontend/.env.local 中的 NEXT_PUBLIC_API_URL
```

**Q: 如何重置数据库？**
```bash
cd backend
npx prisma migrate reset
```

---

## 🎉 开始编码！

```bash
# 方式1：一键启动
./快速启动.sh

# 方式2：分别启动
# Terminal 1: 后端
cd backend && npm run dev

# Terminal 2: 前端  
cd frontend && npm run dev
```

**祝您开发顺利！** 🚀

有任何问题，随时告诉我！

---

**下一步建议**:
1. 阅读 [网站搭建指南.md](./网站搭建指南.md)
2. 运行 `./快速启动.sh` 启动开发环境
3. 开始实现后端API路由
4. 创建前端首页

**Let's build something amazing together!** ✨
